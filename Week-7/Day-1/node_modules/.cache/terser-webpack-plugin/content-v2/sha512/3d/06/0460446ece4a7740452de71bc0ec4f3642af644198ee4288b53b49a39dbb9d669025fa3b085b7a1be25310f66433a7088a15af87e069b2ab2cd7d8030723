{"code":"!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"public\",i(i.s=1)}([function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Availability=void 0;var r=i(2),n=function(){function e(){this.allAvailablePets=[]}return e.prototype.insert=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(void 0===r.pet.petCharacterstics)throw new Error(\"PetCharacterstics can not be null\");if(void 0===r.pet.petHistory)throw new Error(\"PetHistory can not be null\");this.allAvailablePets.push(r)}},e.prototype.findAvailablePetsCollection=function(){for(var e=[],t=0,i=this.allAvailablePets;t<i.length;t++){var n=i[t],o=new r.PetWithCount;o.petCount=n.petCount,o.petType=n.pet.petType,e.push(o)}return e},e}();t.Availability=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.PetShop=void 0;var r=i(0),n=i(3),o=i(5),a=i(6),l=i(7),s=function(){function e(){this.availability=new r.Availability,this.request=new n.Request}return e.prototype.mapRequestDataWithAvailabilityData=function(){for(var e=this.request.enquiryArray,t=this.availability.findAvailablePetsCollection(),i=0,r=e;i<r.length;i++){var n=r[i];if(\"UNASSIGNED\"===n.currentStatus)if(this.canBeFulfilled(n)){n.currentStatus=\"FULFILLED\",n.isAvailable=!0;for(var o=0,a=n.requestedPets;o<a.length;o++)for(var l=a[o],s=(this.findPet(t,l.pet.petType),this.findAvailablePetCount(t,l.pet.petType),0),u=this.availability.allAvailablePets;s<u.length;s++){var c=u[s];c.pet.petType===l.pet.petType&&(c.petCount=c.petCount-l.petCount)}}}},e.prototype.canBeFulfilled=function(e){for(var t=!0,i=(this.availability.findAvailablePetsCollection(),0),r=e.requestedPets;i<r.length;i++){var n=r[i],o=this.availability.findAvailablePetsCollection(),a=this.findAvailablePetCount(o,n.pet.petType);if(n.petCount>a){t=!1;break}}return t},e.prototype.findAvailablePetCount=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n.petType===t)return n.petCount}return 0},e.prototype.findPet=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n.petType===t)return n}return null},e}();t.PetShop=s;var u,c=new s;console.log(\"Adding Availablity for 20 Dogs, 15 Cats and 20 Parrots\"),c.availability.insert(((u=[]).push(v(\"DOG\",20,5,\"White\",10,\"DogHistory\")),u.push(v(\"CAT\",15,5,\"White\",10,\"DogHistory\")),u.push(v(\"PARROT\",20,5,\"White\",10,\"DogHistory\")),u)),console.log(\"Checking Availability count\");var f=c.availability.findAvailablePetsCollection();function p(e,t,i){var r=[];return r.push(v(\"DOG\",e,5,\"White\",10,\"DogHistory\")),r.push(v(\"CAT\",t,5,\"White\",10,\"DogHistory\")),r.push(v(\"PARROT\",i,5,\"White\",10,\"DogHistory\")),r}function v(e,t,i,r,n,s){var u=function(e,t,i,r,n){var a=new o.Pet;a.petType=e;var s=new l.PetCharacterstics;return s.age=t,s.color=i,s.weight=r,a.petCharacterstics=s,a.petHistory=n,a}(e,i,r,n,s),c=new a.PetRequest;return c.pet=u,c.petCount=t,c}console.log(\"Available pets are: \"+JSON.stringify(f)),console.log(\"Adding enquiries for 20 Cats, 30 Parrots\"),c.request.insert(p(0,20,30)),console.log(\"Adding enquiries for 10 Dogs, 2 Cats\"),c.request.insert(p(10,2,0)),console.log(\"Adding enquiries for 5 Cats, 2 Parrots\"),c.request.insert(p(0,5,2)),console.log(\"Adding enquiries for 20 Dogs, 20 Cats, 20 Parrots\"),c.request.insert(p(20,20,20)),console.log(\"Adding enquiries for 2 Dogs, 3 Cats, 4 Parrots\"),c.request.insert(p(2,3,4)),console.log(\"Mapping enquiries to available pets\"),c.mapRequestDataWithAvailabilityData(),console.log(\"Checking Availability count\"),f=c.availability.findAvailablePetsCollection(),console.log(\"Available pets are: \"+JSON.stringify(f)),console.log(\"Checking first 5 Enquiry status\"),console.log(\"First five enquiry status is:\"+JSON.stringify(c.request.checkStatusOfFirstFiveEnquiries()))},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.PetWithCount=void 0;var r=function(){};t.PetWithCount=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Request=void 0;var r=i(0),n=i(4),o=function(){function e(){this.availabilityObject=new r.Availability,this.enquiryArray=[]}return e.prototype.insert=function(e){var t=new n.Enquiry;t.currentStatus=\"UNASSIGNED\",t.isAvailable=!1,t.requestedPets=e,this.enquiryArray.push(t)},e.prototype.checkStatusOfFirstFiveEnquiries=function(){for(var e=[],t=0;t<5;t++){for(var i=!0,r=this.enquiryArray[t],n=this.availabilityObject.findAvailablePetsCollection(),o=0,a=r.requestedPets;o<a.length;o++){var l=a[o],s=this.findAvailablePetCount(n,l.pet.petType);if(l.petCount>s){i=!1;break}}r.isAvailable=i,e.push(r)}return e},e.prototype.findAvailablePetCount=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n.petType===t)return n.petCount}return 0},e}();t.Request=o},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Enquiry=void 0;var r=function(){};t.Enquiry=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Pet=void 0;var r=function(){};t.Pet=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.PetRequest=void 0;var r=function(){};t.PetRequest=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.PetCharacterstics=void 0;var r=function(){};t.PetCharacterstics=r}]);","extractedComments":[]}